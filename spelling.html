<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Spelling Scramble</title>
  <style>
    :root { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    body {margin: 0;padding: 24px;display: grid;place-items: start center;background: #000;color: #fff;}
    .app { width: min(720px, 100%); }
    .row { display: flex; flex-wrap: wrap; gap: 12px; align-items: center; }
    .card {border: 1px solid #333;border-radius: 12px;padding: 16px;background: #111;}
    .muted { opacity: 0.75; }
    .big { font-size: 32px; font-weight: 700; letter-spacing: 2px; }
    .letters { display: flex; flex-wrap: wrap; gap: 10px; }
    button { border: 1px solid #ccc; background: #fff; border-radius: 10px; padding: 10px 12px; cursor: pointer; }
    button:disabled { opacity: 0.45; cursor: not-allowed; }
    .pill { border-radius: 999px; padding: 8px 12px; }
    .primary { border-color: #999; }
    .wordbox { font-size: 22px; font-weight: 600; min-height: 28px; }
    input { border: 1px solid #ccc; border-radius: 10px; padding: 10px 12px; width: min(360px, 100%); }
  </style>
</head>
<body>
  <div class="app">
    <div class="row">
      <div class="card row" style="flex:1">
        <div class="row" style="gap:10px">
          <span class="muted">Mode:</span>
          <label class="row" style="gap:6px">
            <input type="radio" name="mode" value="practice" checked />
            Practice
          </label>
          <label class="row" style="gap:6px">
            <input type="radio" name="mode" value="timed" />
            Timed (60 seconds)
          </label>
        </div>
        <div style="margin-left:auto" class="row">
          <span class="muted">Time:</span>
          <strong id="time">—</strong>
        </div>
      </div>
    </div>

    <div class="card" style="margin-top:12px">
      <div class="row" style="justify-content:space-between">
        <div><strong id="scoreLine">Score: 0 • Streak: 0 • Best: 0</strong></div>
        <div class="row">
          <button id="newWord" class="pill primary">New Word</button>
          <button id="restart" class="pill">Restart</button>
        </div>
      </div>

      <div style="margin-top:18px" class="muted">SCRAMBLE</div>
      <div id="scramble" class="big" style="margin-top:6px">—</div>

      <div style="margin-top:18px" class="muted">Build the word by clicking letters in order.</div>
      <div id="built" class="wordbox" style="margin-top:8px"></div>

      <div id="letters" class="letters" style="margin-top:12px"></div>

      <div class="row" style="margin-top:14px">
        <button id="backspace">Backspace</button>
        <button id="clear">Clear</button>
        <span id="msg" class="muted"></span>
      </div>

      <div style="margin-top:14px" class="muted">You can also type the word and press Enter:</div>
      <div class="row" style="margin-top:8px">
        <input id="typeBox" autocomplete="off" placeholder="type answer and press Enter" />
      </div>
    </div>
  </div>

<script>
  const WORDS = [
    "peace","focus","growth","balance","courage","patience","clarity","purpose","calm","vision",
    "resilience","discipline","mindset","presence","gratitude"
  ];

  const el = {
    time: document.getElementById("time"),
    scoreLine: document.getElementById("scoreLine"),
    scramble: document.getElementById("scramble"),
    built: document.getElementById("built"),
    letters: document.getElementById("letters"),
    msg: document.getElementById("msg"),
    typeBox: document.getElementById("typeBox"),
    newWord: document.getElementById("newWord"),
    restart: document.getElementById("restart"),
    backspace: document.getElementById("backspace"),
    clear: document.getElementById("clear"),
  };

  let state = {
    mode: "practice",
    timeLeft: 60,
    timerId: null,
    answer: "",
    scramble: "",
    built: "",
    picked: [],
    score: 0,
    streak: 0,
    best: 0,
    locked: false
  };

  function shuffle(str) {
    const arr = str.split("");
    for (let i = arr.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr.join("");
  }

  function pickWord() {
    const w = WORDS[Math.floor(Math.random() * WORDS.length)];
    state.answer = w.toUpperCase();
    let s = shuffle(state.answer);
    while (s === state.answer) s = shuffle(state.answer);
    state.scramble = s;
  }

  function renderLetters() {
    el.letters.innerHTML = "";
    const chars = state.scramble.split("");
    chars.forEach((ch, idx) => {
      const b = document.createElement("button");
      b.textContent = ch;
      b.dataset.idx = idx;
      b.disabled = state.picked.includes(idx) || state.locked;
      b.onclick = () => chooseLetter(idx, ch);
      el.letters.appendChild(b);
    });
  }

  function chooseLetter(idx, ch) {
    if (state.locked) return;
    state.picked.push(idx);
    state.built += ch;
    updateUI();
    if (state.built.length === state.answer.length) submitBuilt();
  }

  function submitBuilt() {
    const ok = state.built === state.answer;
    if (ok) {
      state.score += 1;
      state.streak += 1;
      state.best = Math.max(state.best, state.streak);
      flash("Correct");
      nextWord();
    } else {
      state.streak = 0;
      flash("Try again");
    }
    updateUI();
  }

  function flash(text) {
    el.msg.textContent = text;
    setTimeout(() => { el.msg.textContent = ""; }, 900);
  }

  function clearBuilt() {
    state.built = "";
    state.picked = [];
    updateUI();
  }

  function backspace() {
    if (state.built.length === 0) return;
    state.built = state.built.slice(0, -1);
    state.picked.pop();
    updateUI();
  }

  function nextWord() {
    state.built = "";
    state.picked = [];
    pickWord();
    updateUI();
  }

  function updateUI() {
    el.scramble.textContent = state.scramble || "—";
    el.built.textContent = state.built;
    el.scoreLine.textContent = `Score: ${state.score} • Streak: ${state.streak} • Best: ${state.best}`;
    el.typeBox.disabled = state.locked;
    renderLetters();
    if (state.mode === "practice") el.time.textContent = "—";
    else el.time.textContent = `${state.timeLeft}s`;
  }

  function setMode(mode) {
    state.mode = mode;
    stopTimer();
    state.locked = false;
    if (mode === "timed") startTimer();
    else state.timeLeft = 60;
    updateUI();
  }

  function startTimer() {
    state.timeLeft = 60;
    el.time.textContent = `${state.timeLeft}s`;
    state.timerId = setInterval(() => {
      state.timeLeft -= 1;
      if (state.timeLeft <= 0) {
        state.timeLeft = 0;
        state.locked = true;
        stopTimer();
        flash("Time");
      }
      updateUI();
    }, 1000);
  }

  function stopTimer() {
    if (state.timerId) clearInterval(state.timerId);
    state.timerId = null;
  }

  function restartAll() {
    stopTimer();
    state = {
      ...state,
      timeLeft: 60,
      timerId: null,
      built: "",
      picked: [],
      score: 0,
      streak: 0,
      best: 0,
      locked: false
    };
    pickWord();
    if (state.mode === "timed") startTimer();
    updateUI();
  }

  document.querySelectorAll('input[name="mode"]').forEach(r => {
    r.addEventListener("change", e => setMode(e.target.value));
  });

  el.newWord.onclick = () => {
    if (state.locked) return;
    nextWord();
  };

  el.restart.onclick = () => restartAll();
  el.clear.onclick = () => clearBuilt();
  el.backspace.onclick = () => backspace();

  el.typeBox.addEventListener("keydown", e => {
    if (e.key !== "Enter") return;
    if (state.locked) return;
    const guess = (el.typeBox.value || "").trim().toUpperCase();
    el.typeBox.value = "";
    if (!guess) return;
    state.built = guess;
    submitBuilt();
  });

  pickWord();
  updateUI();
</script>
</body>
</html>
